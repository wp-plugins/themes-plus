/**
 * Google Maps
 * /inc/map.php: Don't forget to load Google Maps API (https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false) before enqueuing this script
 */

var map;
var mapdata = jQuery('#map'); // <div id="map" data-latlng="##.####,##.####" data-zoom="##"></div>
var latlng = mapdata.data('latlng');
var latlngStr = latlng.replace(/\s+/g, '').split(",", 2);
var lat = parseFloat(latlngStr[0]), lng = parseFloat(latlngStr[1]);
var zoomfactor = mapdata.data('zoom');

if ( typeof zoomfactor != 'undefined' ) {
    zoomfactor = parseInt(zoomfactor);
} else {
    zoomfactor = 5;
}

function initialize() {
    
    var coords = new google.maps.LatLng( lat, lng );
    var mapOptions = {
        zoom: zoomfactor,
        center: coords,
        mapTypeControl: false,
        panControl: false,
        zoomControl: true,
        zoomControlOptions: {
            //style: google.maps.ZoomControlStyle.SMALL,
            position: google.maps.ControlPosition.TOP_RIGHT
        },
        streetViewControl: false,
        scrollwheel: false,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    
    map = new google.maps.Map(document.getElementById('map'), mapOptions);
    
    var marker = new google.maps.Marker({
        position: coords,
        map: map
    });
    
    google.maps.event.addListener(marker, 'click', function() {
        map.setZoom(11);
        map.setCenter(marker.getPosition());
    });
    
    if ( typeof styles != 'undefined' ) {
        map.setOptions({ styles: styles }); // If Map styles defined as JSON-string: https://developers.google.com/maps/documentation/javascript/styling
    }
    
}
google.maps.event.addDomListener(window, 'load', initialize);